<h1 class="text-center">Profile of <%= @user.name %> <%= @user.surname %></h1>

<ul class="nav nav-tabs" id="myTab">
  <li class="active"><a data-target="#personal" data-toggle="tab">Personal Info</a></li>
  <li><a data-target="#contact" data-toggle="tab">Contact</a></li>
  <li><a data-target="#professional" data-toggle="tab">Professional</a></li>
  <li><a data-target="#educations" data-toggle="tab">Education</a></li>
  <li><a data-target="#interests" data-toggle="tab">Interests</a></li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="personal">  
    Nickname: <%= @user.nickname %></br>
    Old_surname: <%= @user.old_surname %></br>
    Gender: <%= @user.gender%></br>
    Birthdate: <%= @user.birth_date%></br>
    Joined on: <%= @user.created_at.strftime("%Y-%m-%d") %><br>
    <% if correct_user?(@user) %><%= link_to 'Edit', edit_user_registration_path, class: "btn btn-success" %><% end %>
  </div>
  <div class="tab-pane" id="professional">
  	<%= render partial: 'user_details', locals: {collection: 'experience', columns: ['company','title','start_date','end_date','field_of_work'],
  		headers: ['company','title','started at','ended at','field of work'], resource: @user} %>
  </div>
  <div class="tab-pane" id='educations' >
  	<h2>Education</h2>
  	<%= render partial: 'user_details', locals: {collection: 'education', columns: ['school','grade','start_date','end_date','field'],
  		headers: ['school','grade','started at','ended at','field'], resource: @user} %>
  	<h2>Languages</h2>
  	<%= render partial: 'user_details', locals: {collection: 'language', columns: ['name','level'], headers: ['name','level'], resource: @user} %>
  </div>
  
  <div class="tab-pane" id="contact">
    <div class="table-responsive">
      <table class='table table-hover'>
        <thead>
          <tr>
            <th>E-mail</th>
            <th>Type</th>
            <th></th>
          </tr>
        </thead>
        <tr>
          <td><a href='mailto:<%= @user.email %>'><%= @user.email%></td>
          <td>Primary e-mail</td>
          <td><%= link_to "Edit", edit_user_registration_path if correct_user?(@user) %></td>
        </tr>
    </table>
    </div>
  	<%= render partial: 'user_details', locals: {collection: 'contact', columns: ['content','description'],
  		headers: ['email','description'], resource: @user} %>
    
    <%= render partial: 'user_details', locals: {collection: 'address', columns: ['full_address','description'],
    	headers: ['address','description'], resource: @user} %>
  </div>
  <div class="tab-pane" id="interests">
    This user is part of the following interest groups:
    <ol>
    <% @interests.each do |i| %>
      <li><%= link_to i.title, interest_path(i) %></li>
    <% end %>
    </ol>
    And is the initiator of the following interest groups:
    <ol>
	<% @own_interests.each do |i| %>
      <li><%= link_to i.title, interest_path(i) %> with <%= i.users.count %> member(s)</li>
	<% end %>    	
    </ol>
  </div>
</div>

